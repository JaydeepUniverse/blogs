<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
        pre code {
            background-color: #eee;
            display: block;
            padding-left: 10px;
            color: black;
            overflow-x: auto;
            white-space: pre-wrap;
            white-space: -moz-pre-wrap;
            white-space: -pre-wrap;
            white-space: -o-pre-wrap;
            word-wrap: break-word;
            line-height: 20px;
            font-family: Verdana, Geneva, Tahoma, sans-serif;

        }

        pre {
            margin: 0px 0px;
        }

        code {
            color: #4266EC;
            padding: 2px 4px;
            white-space: nowrap;
            background-color: #f7f7f9;
            border: 1px solid #e1e1e8;
            white-space: pre-wrap;
            white-space: -moz-pre-wrap;
            white-space: -pre-wrap;
            white-space: -o-pre-wrap;
            word-wrap: break-word;
        }

        a {
            color: #2b6dad
        }

        h4 {
            font-weight: bold;
        }

        <style>table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

        td,
        th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
            color: #34495E;
        }

        tr:nth-child(even) {
            background-color: #dddddd;
        }

        p {
            color: #34495E;
        }

        li {
            color: #34495E;
        }

        h4 {
            color: #0BA3E5;
        }

        ul.a {
            list-style-type: disc;
        }

        ul.b {
            list-style-type: circle;
        }

        ul.c {
            list-style-type: square;
        }

    </style>

<body>
    <div class="w3-panel w3-flat-turquoise">
        <h4>Manage Container Data – Storage System</h4>
        <p>There are main 2 types through which we can persist the container data.</p>
        <ol>
            <li>Volumes</li>
            <li>Bind Mount</li>
        </ol>

        <h4>1. Volumes</h4>
        <ul class="a">
            <li>This is preferred mechanism for persisting data generated by and used by Docker containers.</li>
            <li>Volumes are completely managed by Docker.</li>
            <li>Commands with use-case</li>
            <p></p>
            <ul class="b">
                <li><code>docker volume create nginx-vol</code></li>
                <p></p>
                <li><code>docker volume ls</code></li>
                <p></p>
                <li><code>docker inspect volume nginx-vol</code></li>
                <p></p>
                <li><code>docker run -d --name nginxTest -v nginx-vol:/usr/share/nginx/html nginx:latest</code></li>
                <p></p>
                <li>Verify the content under nginx-vol <code>ls -ltrh /var/lib/docker/volumes/nginx-vol/_data</code></li>
                <p></p>
                <li>Go inside the container, change something in /usr/share/nginx/html</li>
                <p></p>
                <ul class="c">
                    <li><code>sudo docker exec -it nginxTest /bin/bash</code></li>
                    <p></p>
                    <li><code>touch /usr/share/nginx/html/test</code></li>
                    <p></p>
                </ul>
                <li>Verify the content under nginx-vol <code>ls -ltrh /var/lib/docker/volumes/nginx-vol/_data </code></li>
                <p></p>
                <li>Stop, Remove, Recreate the container using the same command, go inside the container and verify the change inside container</li>
                <p></p>
                <li><code>docker volume rm my-vol</code></li>
            </ul>
        </ul>

        <p></p>
        <h4>2. Bind Mounts</h4>
        <p>When you use a bind mount, a file or directory on the host machine is mounted into a container. The file or directory is referenced by its full or relative path on the host machine.</p>
        <p>The file or directory does not need to exist on the Docker host already. It is created on demand if it does not yet exist. Bind mounts are very performant, but they rely on the host machine’s filesystem having a specific directory structure available.</p>
        <p>Commands with use-case</p>
        <ul class="a">
            <li><code>docker run -d --name nginxTest -v /home/jaydeep/nginxData:/usr/share/nginx/html nginx:latest</code> - Running this command will override content from docker host to container’s mounted path</li>
            <li>Do change in /home/jaydeep/nginxData and verify the change in container</li>
            <li>Remove & Recreate the container with same command to verify the same data is appended in new container</li>
        </ul>
        <p></p>
        <h4>Graphical Comparision</h4>
    </div>
<div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-kfqnJGQUkX0/XqQjI6nQYrI/AAAAAAAAHWQ/vIVQshj3MI8sjyN9XuaJcP_0OzgGgH_ZwCLcBGAsYHQ/s1600/dockerStorage.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="https://2.bp.blogspot.com/-kfqnJGQUkX0/XqQjI6nQYrI/AAAAAAAAHWQ/vIVQshj3MI8sjyN9XuaJcP_0OzgGgH_ZwCLcBGAsYHQ/s640/dockerStorage.JPG" width="640" height="136" data-original-width="802" data-original-height="171" /></a></div>
</body>
</head>

</html>